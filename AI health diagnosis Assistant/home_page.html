<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   Home - AI Health Assistant
  </title>
  <!-- Poppins Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;500;600;700&amp;display=swap" rel="stylesheet"/>
  <!-- Font Awesome 6 -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
   <!-- SweetAlert2 -->
   <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.1/dist/sweetalert2.min.css" rel="stylesheet"/>
   <!-- Tailwind CSS CDN -->
   <script src="https://cdn.tailwindcss.com">
   </script>
   <script>
    tailwind.config = {
    theme: {
        extend: {
            fontFamily: {
                sans: ['Poppins', 'ui-sans-serif', 'system-ui']
            },
            colors: {
                primary: '#0000FF',
                secondary: '#008080'
            }
        }
    }
}
   </script>
   <!-- Site Theme CSS -->
   <link href="style.css" rel="stylesheet"/>
   <!-- Page-specific CSS (Home Page) -->
   <style id="home-page-css">
    html { font-size: 18px; line-height: 1.6; }
    /* Accessibility mode increases base size/contrast */
    .accessibility-mode :where(body) { font-size: 20px; }
    .accessibility-mode .hc-bg { background-color: #0b0b0b !important; color: #fff !important; }
    .accessibility-mode .hc-text { color: #111827 !important; }
    .accessibility-mode a { text-decoration: underline; }
    
    /* Floating Help Assistant */
    .assistant-panel { transform: translateY(100%); transition: transform 0.3s ease; }
    .assistant-panel.open { transform: translateY(0); }

    /* Notification Panel slide-in */
    .notif-panel { transform: translateX(100%); transition: transform 0.3s ease; }
    .notif-panel.open { transform: translateX(0); }

    /* Simple tooltip using data-tooltip */
    [data-tooltip] { position: relative; }
    [data-tooltip]:hover::after {
      content: attr(data-tooltip);
      position: absolute; bottom: 125%; left: 50%; transform: translateX(-50%);
      background: rgba(17,24,39,0.9); color: #fff; font-size: 12px; padding: 6px 8px; border-radius: 6px; white-space: nowrap;
      opacity: 1; pointer-events: none; z-index: 50;
    }
    [data-tooltip]:hover::before {
      content: ''; position: absolute; bottom: 115%; left: 50%; transform: translateX(-50%);
      border-width: 6px; border-style: solid; border-color: rgba(17,24,39,0.9) transparent transparent transparent; z-index: 50;
    }

    /* Table sort indicator */
    th.sortable { cursor: pointer; }
    th.sortable .sort-indicator { opacity: 0.4; margin-left: 0.25rem; }
    th.sortable.active-asc .sort-indicator { opacity: 1; transform: rotate(180deg); }
    th.sortable.active-desc .sort-indicator { opacity: 1; }

    /* Focus visible for accessibility */
    :focus-visible { outline: 3px solid #0000FF60; outline-offset: 2px; }
   </style>
  </link>
 
<!-- CSS Loader Script -->
<script src="./css_loader.js"></script>
</head>
 <body class="font-sans text-gray-800 bg-gray-50">
  <!-- Header (Common Public Info Header) -->
  <header class="fixed top-0 left-0 right-0 z-50 w-full bg-[#0000FF] text-white shadow-md" id="app-header">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
     <a class="flex items-center gap-2" href="./home_page.html">
      <span class="inline-flex h-8 w-8 rounded-full bg-white/20 items-center justify-center">
       <i class="fa-solid fa-heart-pulse">
       </i>
      </span>
      <span class="font-semibold tracking-wide">
       AI Health Assistant
      </span>
     </a>
     <div class="hidden md:flex items-center gap-6">
      <a class="hover:underline hover:text-[#C7D2FE]" href="./features_page.html">
       Features
      </a>
      <a class="hover:underline hover:text-[#C7D2FE]" href="./about_page.html">
       About
      </a>
      <div class="relative">
       <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-white/70">
       </i>
       <input class="pl-9 pr-3 py-2 rounded-md bg-white/20 placeholder-white/70 focus:bg-white/30 focus:outline-none" placeholder="Search site..." type="search"/>
      </div>
      <a class="px-3 py-2 rounded-md bg-white/20 hover:bg-white/30" href="./login_page.html">
       Login
      </a>
      <a class="px-3 py-2 rounded-md bg-[#008080] hover:bg-[#008080]/80" href="./registration_page.html">
       Sign Up
      </a>
     </div>
     <button class="md:hidden inline-flex items-center gap-2 px-3 py-2 rounded-md bg-white/20" id="sidebarToggle">
      Menu
     </button>
    </div>
   </div>
   <script>
    (function() {
    const btn = document.getElementById('sidebarToggle');
    const sb = document.getElementById('app-sidebar');
    if (btn && sb) {
        btn.addEventListener('click', () => sb.classList.toggle('hidden'));
    }
})();
   </script>
  </header>
  <div class="md:flex">
   <!-- Sidebar (Common Public Info Sidebar) -->
   <aside class="mt-16 md:mt-16 fixed md:static top-16 left-0 z-40 h-[calc(100vh-64px)] w-64 bg-white border-r border-gray-200 overflow-y-auto hidden md:block" id="app-sidebar">
    <nav class="p-4 space-y-2 text-gray-700">
     <a aria-current="page" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-[#0000FF]/10 hover:text-[#0000FF] transition bg-[#0000FF]/10 text-[#0000FF] font-medium" href="./home_page.html">
      <i class="fa-solid fa-house text-[#008080]">
      </i>
      <span>
       Home
      </span>
     </a>
     <a class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-[#0000FF]/10 hover:text-[#0000FF] transition" href="./features_page.html">
      <i class="fa-solid fa-sparkles text-[#008080]">
      </i>
      <span>
       Features
      </span>
     </a>
     <a class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-[#0000FF]/10 hover:text-[#0000FF] transition" href="./about_page.html">
      <i class="fa-solid fa-circle-info text-[#008080]">
      </i>
      <span>
       About
      </span>
     </a>
     <details class="group">
      <summary class="flex items-center gap-3 px-3 py-2 rounded-md cursor-pointer hover:bg-[#0000FF]/10 hover:text-[#0000FF]">
       <i class="fa-solid fa-file-lines text-[#008080]">
       </i>
       <span>
        Learn More
       </span>
       <i class="fa-solid fa-chevron-down ml-auto text-xs text-gray-400 group-open:rotate-180 transition">
       </i>
      </summary>
      <div class="pl-8 mt-2 space-y-2">
       <a class="block px-3 py-1 rounded-md hover:bg-gray-100" href="./terms_of_service_page.html">
        Terms of Service
       </a>
       <a class="block px-3 py-1 rounded-md hover:bg-gray-100" href="./privacy_policy_page.html">
        Privacy Policy
       </a>
      </div>
     </details>
     <div class="mt-4 border-t pt-4">
      <p class="text-xs text-gray-500">
       Disclaimer: For informational purposes only.
      </p>
     </div>
    </nav>
   </aside>
   <!-- Main Content -->
   <main class="flex-1 pt-16 md:pt-16 bg-gray-50 min-h-screen">
    <!-- Hero Section -->
    <section class="relative overflow-hidden bg-gradient-to-br from-primary/10 via-white to-secondary/10">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16 grid md:grid-cols-2 gap-10 items-center">
      <div>
       <h1 class="text-3xl md:text-5xl font-semibold text-gray-900 mb-4">
        Get Instant AI-Powered Health Insights
       </h1>
       <p class="text-gray-700 mb-6">
        Enter your symptoms to receive a preliminary analysis and connect with a healthcare professional for a validated diagnosis. Your health, simplified.
       </p>
       <div class="flex flex-wrap items-center gap-3">
        <a class="inline-flex items-center gap-2 px-5 py-3 rounded-md bg-[#0000FF] text-white hover:bg-[#0000FF]/90" href="./registration_page.html" id="primary-cta">
         <i class="fa-solid fa-stethoscope">
         </i>
         <span>
          Check Your Symptoms
         </span>
        </a>
        <button class="inline-flex items-center gap-2 px-4 py-3 rounded-md bg-white border border-gray-200 hover:bg-gray-50" data-tooltip="Quick tour of key features" id="tourBtn">
         <i class="fa-solid fa-person-chalkboard">
         </i>
         <span>
          Take a quick tour
         </span>
        </button>
        <button class="inline-flex items-center gap-2 px-4 py-3 rounded-md bg-white border border-gray-200 hover:bg-gray-50" data-tooltip="Hear this section" id="narrateBtn">
         <i class="fa-solid fa-volume-high">
         </i>
         <span>
          Voice narration
         </span>
        </button>
       </div>
       <p class="mt-3 text-sm text-gray-500">
        Free to start. Cancel anytime.
       </p>
      </div>
      <div class="relative">
       <img alt="AI Health Assistant" class="rounded-lg shadow-lg w-full h-auto object-cover" onerror="this.onerror=null;this.src='https://picsum.photos/id/237/800/500';" src="https://picsum.photos/seed/health-hero/800/500"/>
      </div>
     </div>
    </section>
    <!-- How It Works Section -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
     <h2 class="text-2xl md:text-3xl font-semibold text-gray-900 mb-8">
      How it works
     </h2>
     <div class="grid md:grid-cols-3 gap-6">
      <div class="bg-white rounded-lg border border-gray-200 p-6">
       <div class="flex items-center gap-3 mb-3">
        <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary">
         <i class="fa-solid fa-clipboard-list">
         </i>
        </span>
        <h3 class="text-lg font-semibold">
         1. Enter Symptoms
        </h3>
       </div>
       <p class="text-gray-700">
        Use our guided form to describe your symptoms and upload any relevant medical documents.
       </p>
      </div>
      <div class="bg-white rounded-lg border border-gray-200 p-6">
       <div class="flex items-center gap-3 mb-3">
        <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary">
         <i class="fa-solid fa-brain">
         </i>
        </span>
        <h3 class="text-lg font-semibold">
         2. Get AI Insights
        </h3>
       </div>
       <p class="text-gray-700">
        Our intelligent system analyzes your data to provide a list of potential conditions and their likelihood.
       </p>
      </div>
      <div class="bg-white rounded-lg border border-gray-200 p-6">
       <div class="flex items-center gap-3 mb-3">
        <span class="inline-flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary">
         <i class="fa-solid fa-user-doctor">
         </i>
        </span>
        <h3 class="text-lg font-semibold">
         3. Share with a Doctor
        </h3>
       </div>
       <p class="text-gray-700">
        Submit your case for a professional review and receive a validated diagnosis and personalized notes from a licensed doctor.
       </p>
      </div>
     </div>
    </section>
    <!-- Stats & Chart Section -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
     <div class="grid md:grid-cols-3 gap-6 items-start">
      <div class="md:col-span-1 bg-white rounded-lg border border-gray-200 p-6">
       <h3 class="text-lg font-semibold mb-4">
        Why people trust us
       </h3>
       <ul class="space-y-3 text-gray-700">
        <li class="flex items-start gap-3">
         <i class="fa-solid fa-shield-heart text-green-600 mt-1">
         </i>
         HIPAA-aware data handling
        </li>
        <li class="flex items-start gap-3">
         <i class="fa-solid fa-robot text-blue-600 mt-1">
         </i>
         Explainable AI suggestions
        </li>
        <li class="flex items-start gap-3">
         <i class="fa-solid fa-user-md text-teal-600 mt-1">
         </i>
         Real doctors validate diagnoses
        </li>
       </ul>
       <a class="inline-flex items-center gap-2 mt-4 text-primary hover:underline" href="./features_page.html">
        Learn more
        <i class="fa-solid fa-arrow-right">
        </i>
       </a>
      </div>
      <div class="md:col-span-2 bg-white rounded-lg border border-gray-200 p-6">
       <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold">
         Daily Symptom Analyses
        </h3>
        <span class="text-sm text-gray-500" id="chartStatus">
         Loading chart…
        </span>
       </div>
       <div class="w-full" id="usageChart" style="height: 280px;">
       </div>
       <p class="mt-3 text-sm text-gray-500">
        Tip: Hover the chart to see exact values, drag to zoom, and double-click to reset.
       </p>
      </div>
     </div>
    </section>
    <!-- Sample Table: Popular Symptom Checks -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
     <div class="bg-white rounded-lg border border-gray-200 p-6">
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3 mb-4">
       <h3 class="text-lg font-semibold">
        Popular Symptom Checks
       </h3>
       <div class="flex items-center gap-3">
        <input class="w-72 max-w-full px-3 py-2 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/30" id="tableFilter" placeholder="Filter by symptom or category" type="text"/>
        <span class="text-sm text-gray-500">
         Showing
         <span id="paginationInfo">
          1–6
         </span>
         of 6
        </span>
       </div>
      </div>
      <div class="overflow-x-auto">
       <table class="min-w-full text-sm">
        <thead>
         <tr class="bg-gray-50">
          <th class="text-left p-3 font-semibold sortable" data-key="symptom">
           Symptom
           <i class="fa-solid fa-caret-down sort-indicator">
           </i>
          </th>
          <th class="text-left p-3 font-semibold sortable" data-key="category">
           Category
           <i class="fa-solid fa-caret-down sort-indicator">
           </i>
          </th>
          <th class="text-left p-3 font-semibold sortable" data-key="likelihood">
           Likelihood
           <i class="fa-solid fa-caret-down sort-indicator">
           </i>
          </th>
          <th class="text-left p-3 font-semibold sortable" data-key="date">
           Last Updated
           <i class="fa-solid fa-caret-down sort-indicator">
           </i>
          </th>
          <th class="text-left p-3 font-semibold sortable" data-key="cost">
           Est. Consult Cost
           <i class="fa-solid fa-caret-down sort-indicator">
           </i>
          </th>
          <th class="text-left p-3 font-semibold">
           Action
          </th>
         </tr>
        </thead>
        <tbody class="divide-y divide-gray-100" id="symptomTableBody">
         <!-- rows injected via JS -->
        </tbody>
       </table>
      </div>
     </div>
    </section>
    <!-- Disclaimer Section -->
    <section class="bg-amber-50 border-t border-b border-amber-200">
     <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <h4 class="text-lg font-semibold text-amber-900">
       For Informational Purposes Only
      </h4>
      <p class="text-amber-900/90">
       This AI-powered tool provides preliminary suggestions and is not a substitute for a professional medical diagnosis. Always consult with a qualified healthcare provider for any medical concerns.
      </p>
     </div>
    </section>
    <!-- Final CTA Section -->
    <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 text-center">
     <h2 class="text-2xl md:text-3xl font-semibold text-gray-900 mb-5">
      Ready to take control of your health?
     </h2>
     <a class="inline-flex items-center gap-2 px-6 py-4 rounded-md bg-[#0000FF] text-white hover:bg-[#0000FF]/90 text-base" href="./registration_page.html">
      <i class="fa-solid fa-user-plus">
      </i>
      <span>
       Create Your Free Account
      </span>
     </a>
    </section>
   </main>
  </div>
  <!-- Footer (Common Public Info Footer) -->
  <footer class="bg-gray-100 text-gray-700 border-t border-gray-200">
   <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col md:flex-row items-center justify-between gap-4">
    <div class="flex items-center gap-2">
     <span class="inline-flex h-6 w-6 rounded bg-[#0000FF]/10 items-center justify-center text-[#0000FF]">
      <i class="fa-solid fa-heart-pulse">
      </i>
     </span>
     <span class="text-sm">
      © 2025 AI-Health Corp.
     </span>
    </div>
    <div class="flex items-center gap-6">
     <a class="flex items-center gap-2 hover:text-[#0000FF]" href="./terms_of_service_page.html">
      <i class="fa-solid fa-scale-balanced text-[#008080]">
      </i>
      <span>
       Terms
      </span>
     </a>
     <a class="flex items-center gap-2 hover:text-[#0000FF]" href="./privacy_policy_page.html">
      <i class="fa-solid fa-shield-halved text-[#008080]">
      </i>
      <span>
       Privacy
      </span>
     </a>
    </div>
   </div>
  </footer>
  <!-- Floating Help Assistant -->
  <div class="fixed right-4 bottom-4 z-50">
   <div class="assistant-panel bg-white border border-gray-200 rounded-lg shadow-xl w-[22rem] max-w-[90vw] mb-3" id="assistantPanel">
    <div class="p-4 border-b border-gray-200 flex items-center justify-between">
     <div class="flex items-center gap-2">
      <span class="inline-flex h-7 w-7 items-center justify-center rounded bg-primary/10 text-primary">
       <i class="fa-solid fa-robot">
       </i>
      </span>
      <h4 class="font-semibold">
       Help Assistant
      </h4>
     </div>
     <button class="p-1 rounded hover:bg-gray-100" id="assistantClose">
      <i class="fa-solid fa-xmark">
      </i>
     </button>
    </div>
    <div class="p-4 space-y-3 max-h-64 overflow-y-auto">
     <div class="text-sm text-gray-700">
      Hi! I can help you get started. Try asking “How do I check my symptoms?”
     </div>
     <div class="bg-gray-50 p-3 rounded-md text-sm">
      Tip: Create an account to save your health history for faster future checks.
     </div>
     <a class="inline-flex items-center gap-2 px-3 py-2 rounded-md bg-[#008080] text-white hover:bg-[#008080]/90 text-sm" href="./registration_page.html">
      <i class="fa-solid fa-user-plus">
      </i>
      Sign Up
     </a>
    </div>
   </div>
   <button class="inline-flex items-center gap-2 px-4 py-3 rounded-full bg-[#0000FF] text-white shadow-lg" id="assistantToggle">
    <i class="fa-solid fa-comment-dots">
    </i>
    <span class="hidden sm:inline">
     Help
    </span>
   </button>
  </div>
  <!-- Floating Notification Button & Panel -->
  <button aria-expanded="false" aria-haspopup="true" class="fixed right-4 bottom-20 inline-flex items-center gap-2 px-4 py-3 rounded-full bg-white border border-gray-200 text-gray-700 shadow z-40" id="notifToggle">
   <i class="fa-solid fa-bell">
   </i>
   <span class="hidden sm:inline">
    Notifications
   </span>
  </button>
  <aside class="notif-panel fixed top-16 right-0 w-80 max-w-[90vw] h-[calc(100vh-64px)] bg-white border-l border-gray-200 shadow-xl z-40 flex flex-col" id="notifPanel">
   <div class="p-4 border-b border-gray-200 flex items-center justify-between">
    <h4 class="font-semibold">
     Notifications
    </h4>
    <button class="p-1 rounded hover:bg-gray-100" id="notifClose">
     <i class="fa-solid fa-xmark">
     </i>
    </button>
   </div>
   <div class="flex-1 overflow-y-auto p-4 space-y-3">
    <div class="flex items-start gap-3 p-3 rounded-md bg-blue-50 border border-blue-200">
     <i class="fa-solid fa-circle-info text-blue-600 mt-0.5">
     </i>
     <div class="text-sm text-blue-900">
      New feature: Save your symptom history across devices.
     </div>
    </div>
    <div class="flex items-start gap-3 p-3 rounded-md bg-amber-50 border border-amber-200">
     <i class="fa-solid fa-triangle-exclamation text-amber-600 mt-0.5">
     </i>
     <div class="text-sm text-amber-900">
      Reminder: This tool is for informational purposes. Consult a doctor for medical advice.
     </div>
    </div>
    <div class="flex items-start gap-3 p-3 rounded-md bg-green-50 border border-green-200">
     <i class="fa-solid fa-check-circle text-green-600 mt-0.5">
     </i>
     <div class="text-sm text-green-900">
      Account tips: Verify your email after signup to unlock faster reviews.
     </div>
    </div>
   </div>
  </aside>
  <!-- Accessibility Mode Toggle -->
  <button class="fixed left-4 bottom-4 inline-flex items-center gap-2 px-4 py-3 rounded-full bg-white border border-gray-200 text-gray-700 shadow z-40" data-tooltip="High-contrast &amp; larger text" id="a11yToggle">
   <i class="fa-solid fa-universal-access">
   </i>
   <span class="hidden sm:inline">
    Accessibility
   </span>
  </button>
  <!-- Scripts: SweetAlert2, ApexCharts -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.1/dist/sweetalert2.all.min.js">
  </script>
  <script src="https://cdn.jsdelivr.net/npm/apexcharts">
  </script>
  <script>
   // Welcome toast (system feedback)
window.addEventListener('load', () => {
    Swal.fire({
        toast: true,
        position: 'top-end',
        showConfirmButton: false,
        timer: 3000,
        icon: 'info',
        title: 'Welcome to AI Health Assistant!'
    });
});

// CTA intercept: provide friendly confirmation then navigate
const cta = document.getElementById('primary-cta');
if (cta) {
    cta.addEventListener('click', function(e) {
        e.preventDefault();
        Swal.fire({
            title: 'Start your symptom check',
            text: 'You’ll create a quick account to save your progress.',
            icon: 'question',
            showCancelButton: true,
            confirmButtonText: 'Continue',
            cancelButtonText: 'Later'
        }).then(res => {
            if (res.isConfirmed) window.location.href = cta.getAttribute('href');
        });
    });
}

// Voice Narration using Web Speech API
const narrateBtn = document.getElementById('narrateBtn');
if (narrateBtn && 'speechSynthesis' in window) {
    narrateBtn.addEventListener('click', () => {
        const text = `Get Instant AI-Powered Health Insights. Enter your symptoms to receive a preliminary analysis and connect with a healthcare professional.`;
        window.speechSynthesis.cancel();
        const utter = new SpeechSynthesisUtterance(text);
        utter.rate = 1;
        utter.pitch = 1;
        utter.lang = 'en-US';
        window.speechSynthesis.speak(utter);
    });
} else if (narrateBtn) {
    narrateBtn.disabled = true;
    narrateBtn.title = 'Voice not supported in this browser';
}

// Onboarding coach marks via SweetAlert2 sequence
const tourBtn = document.getElementById('tourBtn');
if (tourBtn) {
    tourBtn.addEventListener('click', async () => {
        const steps = [{
            title: 'Hero',
            text: 'Start here with “Check Your Symptoms” to begin your journey.',
            icon: 'info'
        }, {
            title: 'How it works',
            text: 'Understand the 3 simple steps before you begin.',
            icon: 'info'
        }, {
            title: 'Create account',
            text: 'Register to save progress and share with a doctor.',
            icon: 'info'
        }];
        for (const s of steps) {
            // eslint-disable-next-line no-await-in-loop
            const res = await Swal.fire({
                title: s.title,
                text: s.text,
                icon: s.icon,
                confirmButtonText: 'Next'
            });
            if (!res.isConfirmed) break;
        }
    });
}

// Floating Help Assistant toggle
const assistantToggle = document.getElementById('assistantToggle');
const assistantPanel = document.getElementById('assistantPanel');
const assistantClose = document.getElementById('assistantClose');
if (assistantToggle && assistantPanel) {
    assistantToggle.addEventListener('click', () => assistantPanel.classList.toggle('open'));
    if (assistantClose) assistantClose.addEventListener('click', () => assistantPanel.classList.remove('open'));
}

// Notification panel toggle
const notifToggle = document.getElementById('notifToggle');
const notifPanel = document.getElementById('notifPanel');
const notifClose = document.getElementById('notifClose');
if (notifToggle && notifPanel) {
    const togglePanel = () => {
        notifPanel.classList.toggle('open');
        notifToggle.setAttribute('aria-expanded', notifPanel.classList.contains('open'));
    };
    notifToggle.addEventListener('click', togglePanel);
    if (notifClose) notifClose.addEventListener('click', togglePanel);
}

// Accessibility toggle
const a11yToggle = document.getElementById('a11yToggle');
if (a11yToggle) {
    a11yToggle.addEventListener('click', () => {
        document.documentElement.classList.toggle('accessibility-mode');
        Swal.fire({
            toast: true,
            position: 'bottom-start',
            timer: 1500,
            showConfirmButton: false,
            icon: 'success',
            title: document.documentElement.classList.contains('accessibility-mode') ? 'Accessibility mode on' : 'Accessibility mode off'
        });
    });
}

// ApexCharts: Daily Symptom Analyses
const chartEl = document.querySelector('#usageChart');
const chartStatusEl = document.getElementById('chartStatus');
if (chartEl) {
    const options = {
        chart: {
            type: 'line',
            height: 280,
            toolbar: {
                show: true
            }
        },
        series: [{
            name: 'Analyses',
            data: [120, 180, 150, 220, 260, 240, 300]
        }],
        xaxis: {
            categories: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
        },
        stroke: {
            curve: 'smooth',
            width: 3
        },
        colors: ['#0000FF'],
        markers: {
            size: 4
        },
        grid: {
            borderColor: '#e5e7eb'
        },
        dataLabels: {
            enabled: false
        },
        tooltip: {
            theme: 'light'
        }
    };
    try {
        const chart = new ApexCharts(chartEl, options);
        chart.render().then(() => {
            if (chartStatusEl) chartStatusEl.textContent = 'Last 7 days';
        });
    } catch (e) {
        if (chartStatusEl) chartStatusEl.textContent = 'Failed to load chart';
    }
}

// Table data, sorting, filtering
const rows = [{
    symptom: 'Fever & Chills',
    category: 'General',
    likelihood: 0.72,
    date: '2025-10-01',
    cost: 65
}, {
    symptom: 'Chest Pain',
    category: 'Cardiology',
    likelihood: 0.41,
    date: '2025-09-27',
    cost: 120
}, {
    symptom: 'Shortness of Breath',
    category: 'Pulmonology',
    likelihood: 0.38,
    date: '2025-09-28',
    cost: 95
}, {
    symptom: 'Headache',
    category: 'Neurology',
    likelihood: 0.56,
    date: '2025-10-02',
    cost: 50
}, {
    symptom: 'Rash & Itching',
    category: 'Dermatology',
    likelihood: 0.33,
    date: '2025-09-30',
    cost: 70
}, {
    symptom: 'Abdominal Pain',
    category: 'Gastroenterology',
    likelihood: 0.47,
    date: '2025-10-03',
    cost: 85
}];
let currentSort = {
    key: 'symptom',
    dir: 'asc'
};

const bodyEl = document.getElementById('symptomTableBody');
const filterEl = document.getElementById('tableFilter');
const paginationInfo = document.getElementById('paginationInfo');

function formatCurrency(n) {
    return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD'
    }).format(n);
}

function formatDate(d) {
    return new Date(d).toLocaleDateString(undefined, {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
    });
}

function renderTable() {
    const term = (filterEl?.value || '').toLowerCase();
    let filtered = rows.filter(r => r.symptom.toLowerCase().includes(term) || r.category.toLowerCase().includes(term));
    const {
        key,
        dir
    } = currentSort;
    filtered.sort((a, b) => {
        let va = a[key],
            vb = b[key];
        if (key === 'date') {
            va = new Date(va).getTime();
            vb = new Date(vb).getTime();
        }
        if (va < vb) return dir === 'asc' ? -1 : 1;
        if (va > vb) return dir === 'asc' ? 1 : -1;
        return 0;
    });
    bodyEl.innerHTML = '';
    for (const r of filtered) {
        const tr = document.createElement('tr');
        tr.className = 'hover:bg-gray-50';
        tr.innerHTML = `
          <td class="p-3">${r.symptom}</td>
          <td class="p-3">${r.category}</td>
          <td class="p-3">${Math.round(r.likelihood * 100)}%</td>
          <td class="p-3">${formatDate(r.date)}</td>
          <td class="p-3">${formatCurrency(r.cost)}</td>
          <td class="p-3">
            <a href="./registration_page.html" class="inline-flex items-center gap-2 px-3 py-2 rounded-md bg-[#0000FF] text-white hover:bg-[#0000FF]/90">
              <i class="fa-solid fa-notes-medical"></i> Start Check
            </a>
          </td>`;
        bodyEl.appendChild(tr);
    }
    if (paginationInfo) paginationInfo.textContent = filtered.length > 0 ? `1–${filtered.length}` : '0–0';
}

function updateSortIndicators() {
    document.querySelectorAll('th.sortable').forEach(th => {
        th.classList.remove('active-asc', 'active-desc');
        if (th.dataset.key === currentSort.key) th.classList.add(currentSort.dir === 'asc' ? 'active-asc' : 'active-desc');
    });
}

document.querySelectorAll('th.sortable').forEach(th => {
    th.addEventListener('click', () => {
        const key = th.dataset.key;
        if (currentSort.key === key) {
            currentSort.dir = currentSort.dir === 'asc' ? 'desc' : 'asc';
        } else {
            currentSort.key = key;
            currentSort.dir = 'asc';
        }
        updateSortIndicators();
        renderTable();
    });
});

if (filterEl) filterEl.addEventListener('input', () => renderTable());
updateSortIndicators();
renderTable();
  </script>
 </body>
</html>
